@using Common;
@model ModelProject.CostModel
@{
    Layout = null;
    List<SelectListItem> ArrPro = new List<SelectListItem>();
    ArrPro.Add(new SelectListItem { Text = "请选择产品名称", Value = "" });
}

<div class="addmain">
 @using (Html.BeginForm("Add", "Finance", FormMethod.Post, new { @class = "form" }))
    { 
     @Html.HiddenFor(k=>k.PageIndex)
     @Html.HiddenFor(k=>k.Id)
    <div class="mod normal">
        @if(Model.Id==null || Model.Id <=0) { 
        <div class="item">
            <label class="label"><em>*</em>选择系列：</label>
            <div class="form-field">
                @Html.DropDownListFor(k => k.ProductSNId, Model.XLDroList, new { @class = "drotext", @style = "width:80px;" })
                @Html.DropDownListFor(k => k.product_areaId, Model.AreaDroList, new { @class = "drotext", @style = "width:80px;" })
                
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>选择产品：</label>
            <div class="form-field">
                @Html.DropDownListFor(k => k.ProductId, ArrPro, new { @class = "drotext drobtn" })
            </div>
        </div>
        }
        <div class="item">
            <label class="label"><em>*</em>所属木材：</label>
            <div class="form-field">
                @Html.DropDownListFor(k => k.WoodId, Model.MCDroList, new { @class = "drotext", @style = "width:100px;" })
                @Html.HiddenFor(k => k.WoodName)
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>木材成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.MCPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>开料成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.KLPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>木工前段：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.MGQPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>雕花成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.DHPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>木工后段：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.MGHPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>刮磨成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.GMPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>油漆成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.YQPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label"><em>*</em>辅料成本：</label>
            <div class="form-field">
                @Html.TextBoxFor(k => k.FLPrice, new { @class = "sputtxt", @style = "width:120px;" })
            </div>
        </div>
        <div class="item">
            <label class="label">&nbsp;</label>
            <div class="form-field">
                <a href="javascript:void(0)" class="submitbtn mt10" style="width:140px;">提交</a>
            </div>
        </div>
        <div class="clear"></div>
    </div>
 }
</div>


<script type="text/javascript">
    $(function () {
    $("#ProductSNId").change(function () {
            //var CVal = $(this).val();
            //$("#product_SN").val(CVal);
            var product_SN_id = $("#ProductSNId").val();;
            var product_area_id = $("#product_areaId").val();
            //alert(product_SN_id + ";;;" + product_area_id);
            var ProUrl = "@Url.Action("GetProNameDrolistBySNAndArea","Labels")";
            $.post(ProUrl, { ProSN: product_SN_id, ProProArea: product_area_id }, function (data) {
                //alert(data);
                $('#ProductId').empty();
                $('#ProductId').append($('<option></option>').val("").text("请选择产品名称").attr("selected", true));
                $('#ProductId').append(data);
            });
        });
        $("#product_areaId").change(function () {
                var CVal = $(this).val();
                //$("#product_area").val(CVal);
                var product_SN_id = $("#ProductSNId").val();
                var product_area_id = $("#product_areaId").val();
                //alert(product_SN_id + ";;;" + product_area_id);
                var ProUrl = "@Url.Action("GetProNameDrolistBySNAndArea","Labels")";
                $.post(ProUrl, { ProSN: product_SN_id, ProProArea: product_area_id }, function (data) {
                    //alert(data);
                    $('#ProductId').empty();
                    $('#ProductId').append($('<option></option>').val("").text("请选择产品名称").attr("selected", true));
                    $('#ProductId').append(data);
                });
            });
     
    });
    
</script>